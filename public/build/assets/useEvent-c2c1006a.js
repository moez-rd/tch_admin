import{R as u,s as M,m as D,f as N,u as S,g as T,h as w,i as o,k as p,j as c,c as r,a as t,l as m,n as E,o as k,E as b,p as I,q as x}from"./app-769e3db3.js";import{D as h}from"./index-a4ef7a93.js";import{B as g}from"./index-df28855d.js";function J(){const f=u(M),v=u(D),y=u(N),{getMilestoneDisplayChild:_}=S(),{getContactPersonDisplayChild:C}=T(),s=w({initialValues:{name:"",codename:"",description:"",image:"",price:0,held_in:"",held_on:new Date,group_link:"",eventable_type:"",max_participants:1,submission:"",theme:""},validate:{name:e=>e.length?null:"Nama wajib diisi",codename:e=>e.length?null:"Codename wajib diisi",description:e=>e.length?null:"Deskripsi wajib diisi",price:e=>/.*\./.test(String(e))?"Harga mengandung titik":null,group_link:e=>e.length?/^(?:https?:\/\/)?(?:www\.)?[A-Za-z0-9.-]+\.[A-Za-z]{2,}(?:\/[^\s]*)?$/.test(e)?null:"Link harus berupa URL":"Link grup wajib diisi",eventable_type:e=>e.length?null:"Jenis event wejib diisi"}}),P=e=>{e.preventDefault(),s.validate(),s.isValid()&&o.post(route("events.store"),s.values)},d=(e,a)=>{e.preventDefault(),p.openConfirmModal({title:"Hapus Event",centered:!0,children:c(r,{size:"sm",children:["Yakin ingin menghapus event"," ",t(r,{span:!0,weight:600,children:a.name}),"?. Tindakan ini akan menghapus seluruh pendaftaran event ini."]}),labels:{confirm:"Hapus",cancel:"Batal"},confirmProps:{color:"red"},onConfirm:()=>{o.delete(route("events.destroy",{id:a.id}),{preserveScroll:!0})}})};return{form:s,handleCreate:P,handleDelete:d,handleRegistrationOpen:()=>{p.openConfirmModal({title:"Buka Seluruh Pendaftaran",centered:!0,children:c(r,{size:"sm",children:["Yakin ingin"," ",t(r,{span:!0,weight:600,children:"membuka"})," ","seluruh pendaftaran?"]}),labels:{confirm:"Ya, buka",cancel:"Batal"},confirmProps:{color:"green"},onConfirm:()=>{o.patch(route("options.events.open"))}})},handleRegistrationClose:()=>{p.openConfirmModal({title:"Tutup Seluruh Pendaftaran",centered:!0,children:c(r,{size:"sm",children:["Yakin ingin"," ",t(r,{span:!0,weight:600,children:"menutup"})," ","seluruh pendaftaran?"]}),labels:{confirm:"Ya, tutup",cancel:"Batal"},confirmProps:{color:"red"},onConfirm:()=>{o.patch(route("options.events.close"))}})},handleSeminarCastAdd:e=>{f({opened:!0,eventId:e})},handleMilestoneAdd:e=>{v({opened:!0,milestoneableType:"event",milestoneableId:e})},handleContactPersonAdd:e=>{y({opened:!0,contactPersonableType:"event",contactPersonableId:e})},getCompetitions:e=>e.map(a=>{var n,l;return{id:a.id,title:a.name,link:route("events.show",{event:a.id}),information:[a.price===0?"Gratis":m(Number(a.price)),Number((n=a.eventable)==null?void 0:n.max_participants)===1?"Individual":`Maks ${Number((l=a.eventable)==null?void 0:l.max_participants)} peserta`,`${Number(a.event_registrations_count)||0} pendaftaran`],badges:[{name:Number(a.is_opened)?"Buka":"Tutup",color:Number(a.is_opened)?"green":"red"}],menu:[{label:"Edit",linkProps:{href:route("events.edit",{id:a.id})}},{label:"Hapus",props:{color:"red"},linkProps:{href:"",onClick:i=>d(i,a)}}]}}),getSeminars:e=>e.map(a=>({id:a.id,title:a.name,link:route("events.show",{id:a.id}),information:[a.price?"Gratis":m(Number(a.price)),`${Number(a.event_registrations_count)||0} pendaftaran`],badges:[{name:Number(a.is_opened)?"Buka":"Tutup",color:Number(a.is_opened)?"green":"red"}],menu:[{label:"Edit",linkProps:{href:route("events.edit",{id:a.id})}},{label:"Hapus",props:{color:"red"},linkProps:{href:"",onClick:n=>d(n,a)}}]})),getEventDisplay:e=>{const a=[{title:"Informasi Event",data:[{key:"Nama",value:e.name},{key:"Deskripsi",value:e.description},{key:"Jenis Event",value:E(e.eventable_type)},{key:"Biaya",value:e.price===0?"Gratis":m(e.price)},{key:"Diadakan di",value:e.held_in},{key:"Diadakan pada",value:k(e.held_on)},{key:"Status",value:e.is_opened?t(g,{color:"green",variant:"filled",children:"Buka"}):t(g,{color:"red",variant:"filled",children:"Tutup"})},{key:"Jumlah pendaftaran",value:`${Number(e.event_registrations_count)||0} pendaftaran`},{key:"Dibuat pada",value:k(e.created_at,"datetime")}]}];if(e.eventable_type===b.COMPETITION){const n=e.eventable;a.push({title:"Informasi Kompetisi",data:[{key:"Maks peserta",value:n.max_participants>1?`${n.max_participants} peserta`:"Individual"}]})}if(e.eventable_type===b.SEMINAR){const n=e.eventable,l=n.seminar_casts.map(i=>({data:[{key:"Nama",value:i.name},{key:"Title",value:i.title},{key:"Sebagai",value:t(g,{variant:"filled",color:I(i.role)||"gray",children:x(i.role)})},{key:"Gambar",value:i.image,link:i.image,linkTarget:"_blank"}]}));a.push({title:"Informasi Seminar",data:[{key:"Tema seminar",value:n.theme},{key:"Pemeran",value:t(h,{data:l})}]})}return a.push({title:"Informasi Agenda",data:[{key:"Milestones",value:t(h,{data:_(e.milestones)})}]}),a.push({title:"Informasi Narahubung",data:[{key:"Narahubung",value:t(h,{data:C(e.contact_persons)})}]}),a}}}export{J as u};
